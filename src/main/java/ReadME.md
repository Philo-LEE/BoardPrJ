# 게시판 프로젝트

## 소개
보드 프로젝트는 계정 관리 및 게시판 기능을 URL 형식으로 제공하는 Java 기반 시스템이다. URL 구분자와 파라미터 구조를 활용하여 명령어와 데이터를 효과적으로 처리하고, 특정 명령을 수행하는 데 필요한 데이터 및 실행 흐름을 간결하게 관리할 수 있도록 구현해보았다.

## 사용법

보드 프로젝트는 다양한 명령어와 기능을 URL 형식으로 제공하며, `help` 명령어를 통해 각 명령어의 사용법을 확인할 수 있다.

- **기본 명령어 안내**: `help` 명령어를 입력하면 프로젝트의 전체 명령어 사용 방법을 안내한다.
- **분류별 상세 사용법**: `/accounts/help`처럼 특정 분류에 대해 `help` 명령어를 입력하면 해당 분류의 명령어와 파라미터 사용법을 안내받을 수 있다.

    - 예시:
        - `help`: 전체 명령어에 대한 개요를 제공한다.
        - `/accounts/help`: 계정(`accounts`) 관련 명령어와 각 파라미터 사용법을 안내한다.
        - `/boards/help`, `/posts/help`: `boards` 및 `posts`에 대한 명령어 사용법도 동일한 방식으로 제공된다.

- **관리자 Admin 계정 생성**: 프로젝트 테스트를 위해 `/accounts/getAdmin` 명령어를 사용하여 최고 권한을 가진 Admin 계정으로 접속할 수 있다. 이 명령어는 일반 사용자로는 접근할 수 없는 기능을 테스트하기 위한 목적으로 제공된다.

### 게시판 기본 설정
- **기본 보드 생성**: 프로그램이 시작될 때 기본 `boards`가 자동 생성된다. 이후 추가로 보드를 생성할 수도 있다.
- **게시판 접근 제약**: 기본 `boards`가 없으면 일반 회원은 글을 작성하거나 읽을 수 없다. `boards`의 생성, 수정, 삭제(CRUD)는 관리자(Admin) 계정에서만 가능하다.
- **게시물 고유 인덱스 관리**: 게시물의 포스트 번호와 고유 인덱스는 독립적으로 관리되며, 이를 통해 게시물을 식별하고 관리한다.

## 주요 기능

### 1. URL 슬라이싱 및 파싱
- **기본 형식**: URL 경로는 `/` 구분자를 사용하며, 파라미터는 `?` 기호로 구분한다. 다중 파라미터의 경우 `&`를 통해 구분된다.
- **파라미터 처리**: 각 명령어는 1개의 파라미터를 기본적으로 수신하되, 다중 파라미터 전달 시 메서드가 필요로 하는 파라미터 이름 및 데이터 타입이 일치하면 해당 값이 메서드에서 직접 활용된다.

### 2. 호출 구조
- **초기 구현**: 첫 버전에서는 `switch-case` 문을 통해 각 메서드를 호출했으나, 코드 길이와 가독성 문제로 인해 유지보수가 어려웠다.
- **리플렉션과 어노테이션**: `Mapping` 어노테이션과 리플렉션을 사용하여 메서드를 직접 호출하는 방식으로 전환했다. 이를 통해 약 100줄에 달하던 코드가 10줄로 줄어들어 간결해졌다.

### 3. URL 유효성 검사
- URL은 **분류, 명령, 파라미터, 값**으로 나누어 각 구성 요소의 유효성을 검사한다.
- **삼진트리 구조**: 특정 파라미터를 부모 노드로, 명령어를 자식 노드로 두어 유효성을 관리한다. 만약 입력된 URL의 명령어 노드가 해당 파라미터와 매칭되지 않을 경우 `false`를 반환한다.

```java
//ParamsTable 3개의 자식노드를 갖는다.
static String[] boardsTree =
        {"boards","boardId","boardName",null,"edit","remove","set","view","add",null,null,null,null};
static String[] postsTree =
        {"posts","boardId","postId",null,"add",null,null,"remove","edit","get",null,null,null};
static String[] accountsTree =
        {"accounts","accountId",null,null,"detail","edit","remove",null,null,null,null,null,null};
```

 
- **명령어 실행**: `(해당 노드 - 1) / 3` 계산을 통해 부모 노드에 접근하여 유효성을 확인하고, 유효한 명령어만 실행한다.

```java
// 트리 위에서 입력한 URL의 명령 노드가 매칭되는 파라미터를 가지고 있지 않을 경우 false
if (!tempTable[(commandIndex - 1) / 3].equals(paramstemp[0])) {
return false;
}
```



### 5. 세션과 리퀘스트 객체
- **세션**: 명령어가 입력되는 콘솔에 특정 값을 유지할 필요성이 있어 세션 개념을 도입했다. 이를 통해 로그인한 회원 정보를 유지할 수 있게 되었으며, 이를 클래스화하여 관리하였다.
- **리퀘스트 객체**: URL 검증을 통과한 값과 현재 세션, 설정된 보드 및 계정 집합 등을 리퀘스트 객체로 묶어 메서드에 전달했다. 이를 통해 각 메서드는 하나의 역할을 수행하는 형태로 구현되었으며, 반환값 없이 필요한 작업을 수행할 수 있었다.



### 6. 마무리
약 10일정도 되는 기간동안 밥먹다 만들고, 씻다가도 뛰쳐나와서 코드짜고 테스트하고 하는 경험을했다. 모르는 것을 모른다고 받아들이고 여러 사람들에게 배움을 요청하는 것이 이 프로젝트를 여기까지 이끄는데 큰 도움이 되었다. 유빈님, 위정님, 윤보님, 석환님께 많은 힌트와 조언을 캐치할 수 있었다. 이 문서를 빌어 감사의 말씀을 드리고 싶다. 코딩에 자신감이 조금은 생긴 것 같아 점수를 떠나 의미있는 경험이었다고 생각한다.